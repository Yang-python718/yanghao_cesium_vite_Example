import{_ as m,o as c,e as d,a1 as s,O as r,d as h,a3 as p,f as v,aE as u,aF as _}from"./index.c127cf30.js";const w={class:"popup-container"},y={class:"box-wrap"},C={class:"area"},f={class:"area-title fontColor"},g={class:"content"},I={class:"data-li"},b={class:"data-value"},$={class:"label-num yellowColor"},k={__name:"Popup",props:{title:{type:String,default:"\u6807\u9898"},content:{type:String,default:"\u5185\u5BB9"},closeEvent:Function},setup(i){const e=i,t=()=>{e==null||e.closeEvent()};return(o,n)=>(c(),d("div",w,[n[1]||(n[1]=s("div",{class:"pine"},null,-1)),s("div",y,[s("div",{class:"close",onClick:t},"X"),s("div",C,[s("div",f,[e.title?(c(),d(r,{key:0},[h(p(e.title),1)],64)):v(o.$slots,"title",{key:1},void 0,!0)])]),s("div",g,[s("div",I,[n[0]||(n[0]=s("div",{class:"data-label textColor"},"\u5730\u5740\uFF1A",-1)),s("div",b,[s("span",$,[e.content?(c(),d(r,{key:0},[h(p(e.content),1)],64)):v(o.$slots,"content",{key:1},void 0,!0)])])])])])]))}},x=m(k,[["__scopeId","data-v-3d88ce15"]]);class P{constructor(e){const{viewer:t,position:o,...n}=e;this.viewer=t,this.position=o._value;const{vmInstance:l}=E({...n,closeEvent:this.windowClose.bind(this)});this.vmInstance?this.windowClose.bind(this):this.vmInstance=l,t.cesiumWidget.container.appendChild(l.$el),this.addPostRender()}addPostRender(){this.viewer.scene.postRender.addEventListener(this.postRender,this)}postRender(){if(!this.vmInstance.$el||!this.vmInstance.$el.style)return;const e=this.viewer.scene.canvas.height,t=new Cesium.Cartesian2;Cesium.SceneTransforms.wgs84ToWindowCoordinates(this.viewer.scene,this.position,t),this.vmInstance.$el.style.bottom=e-t.y+260+"px";const o=this.vmInstance.$el.offsetWidth;this.vmInstance.$el.style.left=t.x-o/2+110+"px";const n=this.viewer.camera.position;let l=this.viewer.scene.globe.ellipsoid.cartesianToCartographic(n).height;l+=this.viewer.scene.globe.ellipsoid.maximumRadius,!(Cesium.Cartesian3.distance(n,this.position)>l)&&this.viewer.camera.positionCartographic.height<5e7?this.vmInstance.$el.style.display="block":this.vmInstance.$el.style.display="none"}windowClose(){this.vmInstance&&this.vmInstance.$el.remove(),this.viewer.scene.postRender.removeEventListener(this.postRender,this)}}let a=null;const E=i=>{a&&(document.body.removeChild(a),a=null);const e=u({render(){return _(x,{...i},{title:()=>i.slotTitle,content:()=>i.slotContent})}});a=document.createElement("div");const t=e.mount(a);return document.body.appendChild(a),{vmInstance:t}};export{P as D};
