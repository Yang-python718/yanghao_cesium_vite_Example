import{aq as Je,Z as Ee,m as Qe,n as M,K as ae,ar as et,a6 as tt,as as ot,ai as se,j as y,v as G,at as nt,s as Te,au as Z,h as K,G as _,u as t,aa as ie,F as at,p as Se,av as st,af as k,N as Ve,aw as it,J as lt,y as Ie,ab as rt,I as ut,o as h,e as S,S as g,O as le,Q as x,f as Y,a1 as O,c as I,w as $,R as H,P as D,U as Ne,ac as re,ax as ue,a3 as q,a2 as ze,V as dt,ay as ct,az as pt,aA as ft,aB as vt,a7 as mt,aC as Pe,X as ht}from"./index.c127cf30.js";import{u as yt,c as gt,d as bt,e as wt,f as xt}from"./el-button.e8e55299.js";const J="update:modelValue",Fe="change",de="input";let C;const Ct={height:"0",visibility:"hidden",overflow:Je()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Et=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],Me=n=>{const s=Number.parseFloat(n);return Number.isNaN(s)?n:s};function St(n){const s=window.getComputedStyle(n),i=s.getPropertyValue("box-sizing"),o=Number.parseFloat(s.getPropertyValue("padding-bottom"))+Number.parseFloat(s.getPropertyValue("padding-top")),u=Number.parseFloat(s.getPropertyValue("border-bottom-width"))+Number.parseFloat(s.getPropertyValue("border-top-width"));return{contextStyle:Et.map(c=>[c,s.getPropertyValue(c)]),paddingSize:o,borderSize:u,boxSizing:i}}function ke(n,s=1,i){var o,u;C||(C=document.createElement("textarea"),((o=n.parentNode)!=null?o:document.body).appendChild(C));const{paddingSize:d,borderSize:c,boxSizing:r,contextStyle:f}=St(n);f.forEach(([w,p])=>C==null?void 0:C.style.setProperty(w,p)),Object.entries(Ct).forEach(([w,p])=>C==null?void 0:C.style.setProperty(w,p,"important")),C.value=n.value||n.placeholder||"";let v=C.scrollHeight;const m={};r==="border-box"?v=v+c:r==="content-box"&&(v=v-d),C.value="";const z=C.scrollHeight-d;if(Ee(s)){let w=z*s;r==="border-box"&&(w=w+d+c),v=Math.max(w,v),m.minHeight=`${w}px`}if(Ee(i)){let w=z*i;r==="border-box"&&(w=w+d+c),v=Math.min(w,v)}return m.height=`${v}px`,(u=C.parentNode)==null||u.removeChild(C),C=void 0,m}const It=Qe({id:{type:String,default:void 0},size:yt,disabled:{type:Boolean,default:void 0},modelValue:{type:M([String,Number,Object]),default:""},modelModifiers:{type:M(Object),default:()=>({})},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:M(String),default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:M([Boolean,Object]),default:!1},autocomplete:{type:M(String),default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,clearIcon:{type:ae,default:et},showPassword:Boolean,showWordLimit:Boolean,wordLimitPosition:{type:String,values:["inside","outside"],default:"inside"},suffixIcon:{type:ae},prefixIcon:{type:ae},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:M([Object,Array,String]),default:()=>tt({})},autofocus:Boolean,rows:{type:Number,default:2},...ot(["ariaLabel"]),inputmode:{type:M(String),default:void 0},name:String}),Nt={[J]:n=>se(n),input:n=>se(n),change:(n,s)=>se(n)&&(s instanceof Event||s===void 0),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,mouseleave:n=>n instanceof MouseEvent,mouseenter:n=>n instanceof MouseEvent,keydown:n=>n instanceof Event,compositionstart:n=>n instanceof CompositionEvent,compositionupdate:n=>n instanceof CompositionEvent,compositionend:n=>n instanceof CompositionEvent},zt=["class","style"],Pt=/^on[A-Z]/,Ft=(n={})=>{const{excludeListeners:s=!1,excludeKeys:i}=n,o=y(()=>((i==null?void 0:i.value)||[]).concat(zt)),u=Te();return u?y(()=>{var d;return nt(Object.entries((d=u.proxy)==null?void 0:d.$attrs).filter(([c])=>!o.value.includes(c)&&!(s&&Pt.test(c))))}):(G("use-attrs","getCurrentInstance() returned null. useAttrs() must be called at the top of a setup function"),y(()=>({})))};function Mt(n,{disabled:s,beforeFocus:i,afterFocus:o,beforeBlur:u,afterBlur:d}={}){const c=Te(),{emit:r}=c,f=Z(),v=K(!1),m=p=>{const a=Se(i)?i(p):!1;t(s)||v.value||a||(v.value=!0,r("focus",p),o==null||o())},z=p=>{var a;const P=Se(u)?u(p):!1;t(s)||p.relatedTarget&&((a=f.value)==null?void 0:a.contains(p.relatedTarget))||P||(v.value=!1,r("blur",p),d==null||d())},w=p=>{var a,P;t(s)||st(p.target)||((a=f.value)==null?void 0:a.contains(document.activeElement))&&f.value!==document.activeElement||(P=n.value)==null||P.focus()};return _([f,()=>t(s)],([p,a])=>{!p||(a?p.removeAttribute("tabindex"):p.setAttribute("tabindex","-1"))}),ie(f,"focus",m,!0),ie(f,"blur",z,!0),ie(f,"click",w,!0),typeof process<"u",{isFocused:v,wrapperRef:f,handleFocus:m,handleBlur:z}}const kt=n=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(n);function Tt({afterComposition:n,emit:s}){const i=K(!1),o=r=>{s==null||s("compositionstart",r),i.value=!0},u=r=>{var f;s==null||s("compositionupdate",r);const v=(f=r.target)==null?void 0:f.value,m=v[v.length-1]||"";i.value=!kt(m)},d=r=>{s==null||s("compositionend",r),i.value&&(i.value=!1,k(()=>n(r)))};return{isComposing:i,handleComposition:r=>{r.type==="compositionend"?d(r):u(r)},handleCompositionStart:o,handleCompositionUpdate:u,handleCompositionEnd:d}}function Vt(n){let s;function i(){if(n.value==null)return;const{selectionStart:u,selectionEnd:d,value:c}=n.value;if(u==null||d==null)return;const r=c.slice(0,Math.max(0,u)),f=c.slice(Math.max(0,d));s={selectionStart:u,selectionEnd:d,value:c,beforeTxt:r,afterTxt:f}}function o(){if(n.value==null||s==null)return;const{value:u}=n.value,{beforeTxt:d,afterTxt:c,selectionStart:r}=s;if(d==null||c==null||r==null)return;let f=u.length;if(u.endsWith(c))f=u.length-c.length;else if(u.startsWith(d))f=d.length;else{const v=d[r-1],m=u.indexOf(v,r-1);m!==-1&&(f=m+1)}n.value.setSelectionRange(f,f)}return[i,o]}const Le="ElInput",Lt=Ve({name:Le,inheritAttrs:!1}),Ot=Ve({...Lt,props:It,emits:Nt,setup(n,{expose:s,emit:i}){const o=n,u=it(),d=Ft(),c=lt(),r=y(()=>[o.type==="textarea"?P.b():a.b(),a.m(w.value),a.is("disabled",p.value),a.is("exceed",He.value),{[a.b("group")]:c.prepend||c.append,[a.m("prefix")]:c.prefix||o.prefixIcon,[a.m("suffix")]:c.suffix||o.suffixIcon||o.clearable||o.showPassword,[a.bm("suffix","password-clear")]:X.value&&te.value,[a.b("hidden")]:o.type==="hidden"},u.class]),f=y(()=>[a.e("wrapper"),a.is("focus",ee.value)]),{form:v,formItem:m}=gt(),{inputId:z}=bt(o,{formItemContext:m}),w=wt(),p=xt(),a=Ie("input"),P=Ie("textarea"),j=Z(),N=Z(),Q=K(!1),U=K(!1),ce=K(),W=Z(o.inputStyle),E=y(()=>j.value||N.value),{wrapperRef:Oe,isFocused:ee,handleFocus:Re,handleBlur:Be}=Mt(E,{disabled:p,afterBlur(){var e;o.validateEvent&&((e=m==null?void 0:m.validate)==null||e.call(m,"blur").catch(l=>G(l)))}}),pe=y(()=>{var e;return(e=v==null?void 0:v.statusIcon)!=null?e:!1}),R=y(()=>(m==null?void 0:m.validateState)||""),fe=y(()=>R.value&&ct[R.value]),Ae=y(()=>U.value?pt:ft),$e=y(()=>[u.style]),ve=y(()=>[o.inputStyle,W.value,{resize:o.resize}]),F=y(()=>vt(o.modelValue)?"":String(o.modelValue)),X=y(()=>o.clearable&&!p.value&&!o.readonly&&!!F.value&&(ee.value||Q.value)),te=y(()=>o.showPassword&&!p.value&&!!F.value),T=y(()=>o.showWordLimit&&!!o.maxlength&&(o.type==="text"||o.type==="textarea")&&!p.value&&!o.readonly&&!o.showPassword),oe=y(()=>F.value.length),He=y(()=>!!T.value&&oe.value>Number(o.maxlength)),De=y(()=>!!c.suffix||!!o.suffixIcon||X.value||o.showPassword||T.value||!!R.value&&pe.value),Ke=y(()=>!!Object.keys(o.modelModifiers).length),[je,Ue]=Vt(j);rt(N,e=>{if(We(),!T.value||o.resize!=="both"&&o.resize!=="horizontal")return;const l=e[0],{width:b}=l.contentRect;ce.value={right:`calc(100% - ${b+22-10}px)`}});const B=()=>{const{type:e,autosize:l}=o;if(!(!mt||e!=="textarea"||!N.value))if(l){const b=Pe(l)?l.minRows:void 0,L=Pe(l)?l.maxRows:void 0,A=ke(N.value,b,L);W.value={overflowY:"hidden",...A},k(()=>{N.value.offsetHeight,W.value=A})}else W.value={minHeight:ke(N.value).minHeight}},We=(e=>{let l=!1;return()=>{var b;if(l||!o.autosize)return;((b=N.value)==null?void 0:b.offsetParent)===null||(setTimeout(e),l=!0)}})(B),V=()=>{const e=E.value,l=o.formatter?o.formatter(F.value):F.value;!e||e.value===l||o.type==="file"||(e.value=l)},me=e=>{const{trim:l,number:b}=o.modelModifiers;return l&&(e=e.trim()),b&&(e=`${Me(e)}`),o.formatter&&o.parser&&(e=o.parser(e)),e},ne=async e=>{if(ye.value)return;const{lazy:l}=o.modelModifiers;let{value:b}=e.target;if(l){i(de,b);return}if(b=me(b),String(b)===F.value){o.formatter&&V();return}je(),i(J,b),i(de,b),await k(),(o.formatter&&o.parser||!Ke.value)&&V(),Ue()},he=async e=>{let{value:l}=e.target;l=me(l),o.modelModifiers.lazy&&i(J,l),i(Fe,l,e),await k(),V()},{isComposing:ye,handleCompositionStart:ge,handleCompositionUpdate:be,handleCompositionEnd:we}=Tt({emit:i,afterComposition:ne}),Xe=()=>{U.value=!U.value},Ye=()=>{var e;return(e=E.value)==null?void 0:e.focus()},qe=()=>{var e;return(e=E.value)==null?void 0:e.blur()},Ge=e=>{Q.value=!1,i("mouseleave",e)},Ze=e=>{Q.value=!0,i("mouseenter",e)},xe=e=>{i("keydown",e)},_e=()=>{var e;(e=E.value)==null||e.select()},Ce=()=>{i(J,""),i(Fe,""),i("clear"),i(de,"")};return _(()=>o.modelValue,()=>{var e;k(()=>B()),o.validateEvent&&((e=m==null?void 0:m.validate)==null||e.call(m,"change").catch(l=>G(l)))}),_(F,e=>{if(!E.value)return;const{trim:l,number:b}=o.modelModifiers,L=E.value.value,A=(b||o.type==="number")&&!/^0\d/.test(L)?`${Me(L)}`:L;A!==e&&(document.activeElement===E.value&&E.value.type!=="range"&&l&&A.trim()===e||V())}),_(()=>o.type,async()=>{await k(),V(),B()}),at(()=>{!o.formatter&&o.parser&&G(Le,"If you set the parser, you also need to set the formatter."),V(),k(B)}),s({input:j,textarea:N,ref:E,textareaStyle:ve,autosize:ut(o,"autosize"),isComposing:ye,focus:Ye,blur:qe,select:_e,clear:Ce,resizeTextarea:B}),(e,l)=>(h(),S("div",{class:x([t(r),{[t(a).bm("group","append")]:e.$slots.append,[t(a).bm("group","prepend")]:e.$slots.prepend}]),style:ze(t($e)),onMouseenter:Ze,onMouseleave:Ge},[g(" input "),e.type!=="textarea"?(h(),S(le,{key:0},[g(" prepend slot "),e.$slots.prepend?(h(),S("div",{key:0,class:x(t(a).be("group","prepend"))},[Y(e.$slots,"prepend")],2)):g("v-if",!0),O("div",{ref_key:"wrapperRef",ref:Oe,class:x(t(f))},[g(" prefix slot "),e.$slots.prefix||e.prefixIcon?(h(),S("span",{key:0,class:x(t(a).e("prefix"))},[O("span",{class:x(t(a).e("prefix-inner"))},[Y(e.$slots,"prefix"),e.prefixIcon?(h(),I(t(D),{key:0,class:x(t(a).e("icon"))},{default:$(()=>[(h(),I(H(e.prefixIcon)))]),_:1},8,["class"])):g("v-if",!0)],2)],2)):g("v-if",!0),O("input",Ne({id:t(z),ref_key:"input",ref:j,class:t(a).e("inner")},t(d),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?U.value?"text":"password":e.type,disabled:t(p),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,inputmode:e.inputmode,onCompositionstart:t(ge),onCompositionupdate:t(be),onCompositionend:t(we),onInput:ne,onChange:he,onKeydown:xe}),null,16,["id","name","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","inputmode","onCompositionstart","onCompositionupdate","onCompositionend"]),g(" suffix slot "),t(De)?(h(),S("span",{key:1,class:x(t(a).e("suffix"))},[O("span",{class:x(t(a).e("suffix-inner"))},[!t(X)||!t(te)||!t(T)?(h(),S(le,{key:0},[Y(e.$slots,"suffix"),e.suffixIcon?(h(),I(t(D),{key:0,class:x(t(a).e("icon"))},{default:$(()=>[(h(),I(H(e.suffixIcon)))]),_:1},8,["class"])):g("v-if",!0)],64)):g("v-if",!0),t(X)?(h(),I(t(D),{key:1,class:x([t(a).e("icon"),t(a).e("clear")]),onMousedown:re(t(ue),["prevent"]),onClick:Ce},{default:$(()=>[(h(),I(H(e.clearIcon)))]),_:1},8,["class","onMousedown"])):g("v-if",!0),t(te)?(h(),I(t(D),{key:2,class:x([t(a).e("icon"),t(a).e("password")]),onClick:Xe,onMousedown:re(t(ue),["prevent"]),onMouseup:re(t(ue),["prevent"])},{default:$(()=>[(h(),I(H(t(Ae))))]),_:1},8,["class","onMousedown","onMouseup"])):g("v-if",!0),t(T)?(h(),S("span",{key:3,class:x([t(a).e("count"),t(a).is("outside",e.wordLimitPosition==="outside")])},[O("span",{class:x(t(a).e("count-inner"))},q(t(oe))+" / "+q(e.maxlength),3)],2)):g("v-if",!0),t(R)&&t(fe)&&t(pe)?(h(),I(t(D),{key:4,class:x([t(a).e("icon"),t(a).e("validateIcon"),t(a).is("loading",t(R)==="validating")])},{default:$(()=>[(h(),I(H(t(fe))))]),_:1},8,["class"])):g("v-if",!0)],2)],2)):g("v-if",!0)],2),g(" append slot "),e.$slots.append?(h(),S("div",{key:1,class:x(t(a).be("group","append"))},[Y(e.$slots,"append")],2)):g("v-if",!0)],64)):(h(),S(le,{key:1},[g(" textarea "),O("textarea",Ne({id:t(z),ref_key:"textarea",ref:N,class:[t(P).e("inner"),t(a).is("focus",t(ee))]},t(d),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:t(p),readonly:e.readonly,autocomplete:e.autocomplete,style:t(ve),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:t(ge),onCompositionupdate:t(be),onCompositionend:t(we),onInput:ne,onFocus:t(Re),onBlur:t(Be),onChange:he,onKeydown:xe}),null,16,["id","name","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),t(T)?(h(),S("span",{key:0,style:ze(ce.value),class:x([t(a).e("count"),t(a).is("outside",e.wordLimitPosition==="outside")])},q(t(oe))+" / "+q(e.maxlength),7)):g("v-if",!0)],64))],38))}});var Rt=dt(Ot,[["__file","input.vue"]]);const Dt=ht(Rt);export{Dt as E};
